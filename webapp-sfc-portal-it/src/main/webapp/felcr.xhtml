<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="WEB-INF/plantilla/plantilla.xhtml">
    <ui:define name="contenido">
        <p:panel header="DTE's Costa Rica." style="font-weight: bold; font-size: 12px;">
            <p:growl id="msgFelcr" showDetail="true"/>
            <p:panelGrid columns="7">
                <p:outputLabel value="Fecha facturación" style="font-weight: bold; font-size: 12px;"/>
                <p:calendar id="calFechaFacturacion" value="#{Felcr.fecha_facturacion}" pattern="dd/MM/yyyy" style="font-size: 12px;">
                    <p:ajax event="dateSelect" listener="#{Felcr.filtrar_tabla}" update="tblDtes"/>
                </p:calendar>
                <p:selectOneMenu id="somEstado" value="#{Felcr.tabla}" style="font-size: 12px;">
                    <f:selectItems value="#{Felcr.lst_tabla}"/>
                </p:selectOneMenu>
                <p:commandButton id="btnGoSocket" value="GoSocket" actionListener="#{Felcr.filtrar_tabla}" icon="pi pi-send" update="tblDtes">
                    <p:confirm header="Confirmación" message="Seguro desea realizar esta acción?" icon="pi pi-exclamation-triangle"/>
                </p:commandButton>
                <p:commandButton id="btnCargarDocs" value="Cargar Docs." actionListener="#{Felcr.filtrar_tabla}" icon="pi pi-upload" update="tblDtes">
                    <p:confirm header="Confirmación" message="Seguro desea realizar esta acción?" icon="pi pi-exclamation-triangle"/>
                </p:commandButton>
                <p:commandButton id="btnAnularDoc" value="Anular Doc" actionListener="#{Felcr.filtrar_tabla}" icon="pi pi-trash" update="tblDtes">
                    <p:confirm header="Confirmación" message="Seguro desea realizar esta acción?" icon="pi pi-exclamation-triangle"/>
                </p:commandButton>
                <p:commandButton id="btnReFacturar" value="Re-Facturar" actionListener="#{Felcr.filtrar_tabla}" icon="pi pi-reply" update="tblDtes">
                    <p:confirm header="Confirmación" message="Seguro desea realizar esta acción?" icon="pi pi-exclamation-triangle"/>
                </p:commandButton>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
                    <p:commandButton value="SI" type="button" styleClass="ui-confirmdialog-yes" />
                    <p:commandButton value="NO" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
                </p:confirmDialog>
            </p:panelGrid>
            <style type="text/css">
                .activo {
                    background-color: orange !important;
                    background-image: none !important;
                    color: #000000 !important;
                }
            </style>
            <p:dataTable 
                id="tblDtes" 
                var="dte" 
                widgetVar="widgetTblDtes" 
                value="#{Felcr.lst_reg_tbl_dtecr}"
                selectionMode="single" 
                selection="#{Felcr.sel_reg_tbl_dtecr}" 
                rowKey="#{dte.id_convert_document}"
                paginator="true" 
                rows="10" 
                rowsPerPageTemplate="10,20,30" 
                paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                rowStyleClass="#{dte.procesado eq 'NO' ? 'pendiente' : null}"
                style="font-size: 12px;">
                <p:column headerText="No. Orden E1" sortBy="#{dte.no_orden_e1}" filterBy="#{dte.no_orden_e1}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.no_orden_e1}"/>
                </p:column>
                <p:column headerText="Tipo Orden E1" sortBy="#{dte.tipo_orden_e1}" filterBy="#{dte.tipo_orden_e1}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.tipo_orden_e1}"/>
                </p:column>
                <p:column headerText="No. Documento E1" sortBy="#{dte.no_factura}" filterBy="#{dte.no_factura}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.no_factura}"/>
                </p:column>
                <p:column headerText="Fecha Documento E1" sortBy="#{dte.fecha_documento}" filterBy="#{dte.fecha_documento}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.fecha_documento}"/>
                </p:column>
                <p:column headerText="Tax Id Receptor" sortBy="#{dte.tax_id_receptor}" filterBy="#{dte.tax_id_receptor}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.tax_id_receptor}"/>
                </p:column>
                <p:column headerText="Nombre Receptor" sortBy="#{dte.nombre_receptor}" filterBy="#{dte.nombre_receptor}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.nombre_receptor}"/>
                </p:column>
                <p:column headerText="Fecha Envío" sortBy="#{dte.fecha_envio}" filterBy="#{dte.fecha_envio}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.fecha_envio}"/>
                </p:column>
                <p:column headerText="Re-facturación" sortBy="#{dte.refacturacion}" filterBy="#{dte.refacturacion}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.refacturacion}"/>
                </p:column>
                <p:column headerText="Procesado" sortBy="#{dte.procesado}" filterBy="#{dte.procesado}" filterMatchMode="contains" style="width: 200px; font-size: 12px;">
                    <h:outputText value="#{dte.procesado}"/>
                </p:column>
            </p:dataTable>
        </p:panel>
    </ui:define>
</ui:composition>